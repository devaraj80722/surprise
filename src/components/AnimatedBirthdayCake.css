/**
 * Final, definitive CSS for the animated birthday cake.
 * This version implements the true geometric V-shaped cavity cut.
 */

.center-wrapper {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    perspective: 1200px;
}

.cake-container-final {
    position: relative;
    width: 250px;
    height: 400px;
    display: flex;
    justify-content: center;
    align-items: center;
    transform-style: preserve-3d;
}

/* Body for the initial, uncut cake */
.cake-body-full {
    position: relative;
    width: 100%;
    display: flex;
    flex-direction: column-reverse;
    align-items: center;
}

.cake-plate {
    width: 100%;
    height: 10px;
    background: white;
    border-radius: 5px;
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
}

.cake-layers-wrapper {
    width: 220px;
    height: 135px;
    overflow: hidden;
    position: relative;
}

.cake-layer-item {
    width: 100%;
    height: 40px;
    background: #6A381F;
    border-radius: 6px;
    margin-top: 5px;
}
.cake-layer-item:first-child { margin-top: 0; }

.icing-svg-layer {
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 220px;
    height: 60px;
    overflow: visible;
    z-index: 5;
}

.candle-final {
    position: absolute;
    top: -55px;
    width: 14px;
    height: 50px;
    background: #f0aab9;
    border-radius: 7px 7px 0 0;
    z-index: 10;
}
.wick-final { width: 3px; height: 8px; background: #444; }
.flame-final { position: absolute; top: -20px; width: 16px; height: 24px; background: #FFC107; border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; transform-origin: bottom center; }

/* Styles for the final geometric cut scene */
.geometric-cut-scene {
    position: absolute;
    width: 250px;
    height: 400px;
    display: flex;
    justify-content: center;
    align-items: center;
    transform-style: preserve-3d;
    transform: rotateX(-15deg) rotateY(20deg);
}

/* The cake body built from split layers */
.cake-body-split {
    position: relative;
    width: 220px;
    height: 145px; /* cake layers + plate */
    display: flex;
    flex-direction: column-reverse;
    align-items: center;
}
.split-layer-stack {
    display: flex;
    flex-direction: column-reverse;
    gap: 5px;
}
.split-layer {
    display: flex;
    justify-content: center;
    width: 100%;
    height: 40px;
    gap: 2px; /* This creates the physical empty space */
}
.layer-half-left, .layer-half-right {
    width: 50%;
    height: 100%;
    background: #502A16; /* Inner cake color */
    position: relative;
}
/* This pseudo-element creates the outer cake texture */
.layer-half-left::before, .layer-half-right::before {
    content: '';
    position: absolute;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    background: #6A381F; /* Outer cake texture */
}
.layer-half-left::before { 
    border-radius: 6px 0 0 6px;
    clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
}
.layer-half-right::before { 
    border-radius: 0 6px 6px 0;
    clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
}

/* Shaping the halves to form the V-cavity */
.layer-half-left {
    clip-path: polygon(0 0, 100% 0, 0% 100%, 0% 100%);
}
.layer-half-right {
    clip-path: polygon(100% 0, 100% 100%, 0 100%, 100% 0);
}


/* The icing on top of the split cake */
.icing-top-split {
    position: absolute;
    top: 0;
    width: 100%;
    height: 12px;
    background: white;
    border-radius: 6px;
    /* This creates the V-cut in the icing */
    clip-path: polygon(0 0, 100% 0, 100% 100%, 55% 100%, 50% 20%, 45% 100%, 0 100%);
}


/* The final 3D slice that animates out */
.final-slice-3d {
    position: absolute;
    width: 22px; /* Width of the gap */
    height: 135px; /* Height of layers */
    transform-style: preserve-3d;
    /* Positioned in the center of the cavity */
    transform: translateZ(30px) rotateY(-15deg);
    z-index: 30;
}
.final-slice-face {
    position: absolute;
    width: 100%;
    height: 100%;
}
.final-slice-top {
    height: 12px;
    background: white;
    transform: rotateX(90deg) translateZ(67.5px);
}
.final-slice-outer {
    background: #6A381F;
    transform: rotateY(90deg) translateZ(11px);
    border-radius: 6px;
}
.final-slice-left {
    width: 120px;
    background: #502A16;
    transform: rotateY(-30deg) translateZ(10px);
}
.final-slice-right {
    width: 120px;
    background: #502A16;
    transform: rotateY(30deg) translateZ(10px);
}
/* Layer lines for slice */
.final-slice-left::before, .final-slice-right::before {
    content: ''; position: absolute; width: 100%; height: 5px; background: white; top: 40px;
}
.final-slice-left::after, .final-slice-right::after {
    content: ''; position: absolute; width: 100%; height: 5px; background: white; top: 85px;
}


.text-button-wrapper {
    position: absolute;
    bottom: 35vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 20px;
}
.cake-text-final { font-size: 2.5rem; color: #B23A48; font-family: 'Caveat', cursive; }
.fire-button-final {
  padding: 14px 32px;
  font-size: 1.4rem;
  font-family: 'Caveat', cursive;
  background: linear-gradient(135deg, #ff9a9e, #fad0c4);
  color: #5a1a1a;
  border: none;
  border-radius: 999px;
  cursor: pointer;
  box-shadow: 0 8px 20px rgba(255, 154, 158, 0.45);
  transition: box-shadow 0.25s ease;
}

.fire-button-final:hover:enabled {
  background: linear-gradient(135deg, #ff7e82, #fbc6b4); /* Slightly darker gradient */
  color: #4a1515; /* Slightly lighter text color */
  box-shadow: 0 12px 28px rgba(255, 154, 158, 0.6);
}

@media (max-width: 768px) {
  .cake-container-final, .geometric-cut-scene {
    transform: scale(0.7);
  }

  .text-button-wrapper {
    bottom: 25vh; /* Adjust position for smaller screen */
  }

  .cake-text-final {
    font-size: 1.5rem;
  }

  .fire-button-final {
    padding: 12px 28px;
    font-size: 1.2rem;
  }
}

